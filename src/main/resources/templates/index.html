<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head >
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-Type" content="multipart/form-data; charset=utf-8" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
    <script src="/static/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.1/jquery.form.min.js"></script>
    <title>Title</title>
</head>
<body>
<!-- Header -->
<header class="w3-display-container w3-content w3-center" style="max-width:1500px">
    <!--<img class="w3-image"  src="/static/IMG_1145.PNG" th:src = "@{/IMG_1145.PNG}" alt="Me" style="height: 400px">-->
    <p class="w3-light-grey" style="height: 400px"></p>
    <div class="w3-display-middle w3-padding-large w3-border w3-wide w3-text-light-grey w3-center">
        <h1 class="w3-hide-medium w3-text-black w3-hide-small w3-xxxlarge">PLATFORM AS A SEVICE</h1>
        <h5 class="w3-hide-large w3-text-black" style="white-space:nowrap">PLATFORM AS A SEVICE</h5>
        <h3 class="w3-hide-medium w3-hide-small w3-text-black">SHEFFIELD</h3>
    </div>

    <div class="w3-bar w3-light-grey w3-round w3-display-bottommiddle w3-hide-medium" style="bottom:-16px">
        <a href="index" class="w3-bar-item w3-button w3-black">Home</a>
        <a class="w3-bar-item" th:if="${session.userId}" th:text="${session.userName}"></a>
        <a href="loginOut" class="w3-bar-item w3-button" th:if="${session.userId}">Log out</a>
        <a href="login" class="w3-bar-item w3-button"  th:unless="${session.userId != null}" >Login</a>
        <a href="register" class="w3-bar-item w3-button"  th:unless="${session.userId != null}" >Register</a>
        <a href="bank" class="w3-bar-item w3-button" th:if="${session.userId}">My Bank</a>
        <a href="#uploadFile" class="w3-bar-item w3-button" th:if="${session.userId}">Upload</a>
    </div>
</header>

<!-- Navbar on small screens -->
<div class="w3-center w3-light-grey w3-padding-16 w3-hide-large">
    <div class="w3-bar w3-light-grey">
        <a href="index" class="w3-bar-item w3-button w3-black">Home</a>
        <a href="login" class="w3-bar-item w3-button">Login</a>
        <a href="register" class="w3-bar-item w3-button">Register</a>
        <a href="bank" class="w3-bar-item w3-button">My Bank</a>
    </div>
</div>

<section class="w3-container">
    <div class="w3-container w3-padding-24">
        <h2 class="w3-container">Application Tray</h2>
    </div>
    <div class="w3-row-padding" id="applist">
        <!--<div class="w3-third w3-container w3-margin-bottom">-->
            <!--&lt;!&ndash;<a href=""><img src="/static/jiayu3.png" th:src = "@{/jiayu3.png}" alt="Norway" style="width:100%;height: 30%" class="w3-hover-opacity"></a>&ndash;&gt;-->
            <!--<div class="w3-container w3-white w3-center">-->
                <!--<p><b></b></p>-->
                <!--<p></p>-->
            <!--</div>-->
        <!--</div>-->
    </div>

    <div class="w3-center w3-padding-32">
        <div class="w3-bar">
            <a href="#" class="w3-bar-item w3-button w3-hover-black">«</a>
            <a href="#" class="w3-bar-item w3-light-grey w3-button">1</a>
            <a href="#" class="w3-bar-item w3-button w3-hover-black">»</a>
        </div>
    </div>

</section>
<section class="w3-container">
    <div class="w3-container w3-padding-24" id="uploadFile">
        <h2 class="w3-container">Upload File</h2>
    </div>
    <div class="w3-row-padding">
        <div class="w3-container w3-margin-bottom">
            <form action="uploads" method="post" id="uploadForm" enctype="multipart/form-data">
                <p class="w3-container">
                    <label class="w3-section">Project Name: </label>
                    <input class="w3-input w3-section" type="text" name="applicationName" placeholder="please type your project name" required/></p>
                <p class="w3-container">
                    <label class="w3-section">Description: </label>
                    <input class="w3-input w3-section" type="text" name="desc" placeholder="please type your description about your project" required/></p>
                <p class="w3-container">
                    <label class="w3-section">Link: </label>
                    <input class="w3-input w3-section" type="text" name="linkUrl" placeholder="please type your project URL" required/></p>

                <p class="w3-container">
                    <label class="w3-section">Upload Project: </label>
                    <input class="w3-input w3-section" type="file" name="appFile" required/>
                    <!--<input class="w3-button w3-margin-top w3-white w3-border w3-round-large"  type="submit" value="Upload File">-->
                </p>
                <p class="w3-container">
                    <label class="w3-section">Upload your project Logo: </label>
                    <input class="w3-input w3-section" type="file" name="imageFile" required/>
                    <input class="w3-button w3-margin-top w3-white w3-border w3-round-large"  type="submit" value="Upload">
                </p>
            </form>
        </div>
    </div>
</section>
<footer th:include="@{/footer} :: footerInfo"></footer>
<script>

    $(function(){
        var pagesize = 6;
        var pagenum = 1;
        $.ajax({
            url:"appList?pageSize="+pagesize+"&pageNum="+pagenum,
            async:false,
            type:'get',
            dataType:"text",
            success:function (data) {
                var result = JSON.parse(data);
               // alert(result.data);
                //object
                var info = result.data;
                //array: lots of  applist
                var applistInfo = info.list;
                //alert(info.list[0]);
               // alert(typeof result.data)
                for(var i=0;i<applistInfo.length;i++){
                    $('#applist').append(`
                    <div class="w3-third w3-container w3-margin-bottom">
                        <a href=""><img src=`+applistInfo[i].imageUrl+` alt="Norway" style="width:100%;height: 30%" class="w3-hover-opacity"></a>
                        <div class="w3-container w3-white w3-center">
                            <p><b>`+applistInfo[i].applicationName+`</b></p>
                            <p>`+applistInfo[i].description+`</p>
                        </div>
                    </div>
                `);
                }
            }

        });
        $("#uploadForm").ajaxForm(function(data){
            //alert(data);
            if(data.code == 200){
                alert("upload success");
            }
        });
    });
</script>
</body>
</html>